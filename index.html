<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open App</title>
    <script type="text/javascript">
        var appUrl = "iapdeeplink://";
        var appStoreUrl = "https://apps.apple.com/app/6473403510";

        // Function to try opening the app using an invisible iframe
        function tryOpenApp() {
            var now = new Date().getTime();
            var iframe = document.createElement("iframe");
            iframe.style.display = "none";
            iframe.src = appUrl;
            document.body.appendChild(iframe);

            // Check if the app was opened successfully after a delay
            setTimeout(function() {
                document.body.removeChild(iframe);
                var later = new Date().getTime();
                // If the time difference is less than 2 seconds, it means the deep link failed to open
                if (later - now < 2000) {
                    redirectToAppStore();
                }
            }, 1500); // Check slightly before the redirect time
        }

        // Function to redirect to App Store if the app can't be opened
        function redirectToAppStore() {
            window.location.href = appUrl;
        }

        // Attempt to open the app on page load
        window.onload = tryOpenApp;
    </script>
</head>
<body>
    <!-- Optionally, you can add UI elements or messages here -->
</body>
</html>
