<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open App</title>
    <script type="text/javascript">
        var appUrl = "iapdeeplink://";
        var appStoreUrl = "https://apps.apple.com/app/6473403510";

        // Function to try opening the app using window.location
        function tryOpenApp() {
            var now = Date.now();
            // Attempt to open the deep link
            tryOpenApp();

            // Check if the app was opened successfully after a delay
            setTimeout(function() {
                var later = Date.now();
                // If the time difference is less than 2 seconds, it means the deep link failed to open
                if (later - now < 2000) {
                    showAppStoreMessage();
                }
            }, 1500); // Check slightly before the redirect time
        }

        // Function to show the App Store message
        function showAppStoreMessage() {
            document.getElementById('appStoreMessage').style.display = 'block';
        }
        
        // Function to handle app store redirect button
        function redirectToAppStore() {
            window.location.href = appStoreUrl;
        }

        // Show the open app message on page load
        window.onload = function() {
            document.getElementById('openAppMessage').style.display = 'block';
        }
    </script>
    <style>
        #appStoreMessage, #openAppMessage {
            display: none;
        }
    </style>
</head>
<body>
    <div id="appStoreMessage">
        <p>It seems like the app didn't open. Do you want to go to the App Store?</p>
        <button onclick="redirectToAppStore()">Go to App Store</button>
    </div>
</body>
</html>
